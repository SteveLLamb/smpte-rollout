<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="mobile.css">
    <title>SMPTE Rollout (Countries) Map</title>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" crossorigin="anonymous"></script>
    <script src="features.js" defer></script>


    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/maps.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/geodata/worldLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

    <!-- Chart code -->
    <script>
    am4core.ready(function() {

    // Themes begin
    am4core.useTheme(am4themes_animated);
    // Themes end

    /* Create map instance */
    var chart = am4core.create("chartdiv", am4maps.MapChart);

    /* Set map definition */
    chart.geodata = am4geodata_worldLow;

    /* Set projection */
    chart.projection = new am4maps.projections.Miller();

    /* Create map polygon series */
    var polygonSeries = chart.series.push(new am4maps.MapPolygonSeries());

    /* Make map load polygon (like country names) data from GeoJSON */
    polygonSeries.useGeodata = true;

    polygonSeries.data = [{"id":"AD","value":100},{"id":"AE","value":92.45},{"id":"AF","value":100},{"id":"AG","value":100},{"id":"AI","value":0},{"id":"AL","value":44.44},{"id":"AM","value":72.73},{"id":"AO","value":70},{"id":"AR","value":93.17},{"id":"AS","value":100},{"id":"AT","value":84.44},{"id":"AU","value":87.91},{"id":"AW","value":100},{"id":"AX","value":0},{"id":"AZ","value":66.67},{"id":"BA","value":54.84},{"id":"BB","value":100},{"id":"BD","value":12.5},{"id":"BE","value":84},{"id":"BF","value":50},{"id":"BG","value":30.85},{"id":"BH","value":42.11},{"id":"BI","value":0},{"id":"BJ","value":100},{"id":"BL","value":0},{"id":"BM","value":90},{"id":"BN","value":0},{"id":"BO","value":96.43},{"id":"BQ","value":100},{"id":"BR","value":39.32},{"id":"BS","value":100},{"id":"BT","value":0},{"id":"BV","value":0},{"id":"BW","value":60},{"id":"BY","value":94.17},{"id":"BZ","value":100},{"id":"CA","value":100},{"id":"CD","value":88.89},{"id":"CF","value":0},{"id":"CG","value":100},{"id":"CH","value":70.44},{"id":"CI","value":83.33},{"id":"CK","value":100},{"id":"CL","value":97.3},{"id":"CM","value":100},{"id":"CN","value":0.11},{"id":"CO","value":97.6},{"id":"CR","value":94.59},{"id":"CU","value":20},{"id":"CV","value":100},{"id":"CW","value":100},{"id":"CX","value":100},{"id":"CY","value":66.67},{"id":"CZ","value":3.33},{"id":"DE","value":82.31},{"id":"DJ","value":100},{"id":"DK","value":89.07},{"id":"DM","value":100},{"id":"DO","value":100},{"id":"DZ","value":66.67},{"id":"EC","value":93.33},{"id":"EE","value":86},{"id":"EG","value":23.19},{"id":"EH","value":0},{"id":"ER","value":0},{"id":"ES","value":86.2},{"id":"ET","value":60},{"id":"FI","value":90.86},{"id":"FJ","value":100},{"id":"FK","value":100},{"id":"FM","value":100},{"id":"FO","value":40},{"id":"FR","value":89.52},{"id":"GA","value":100},{"id":"GB","value":98},{"id":"GD","value":100},{"id":"GE","value":72.73},{"id":"GF","value":50},{"id":"GG","value":0},{"id":"GH","value":60},{"id":"GI","value":100},{"id":"GL","value":100},{"id":"GM","value":0},{"id":"GN","value":100},{"id":"GP","value":75},{"id":"GQ","value":0},{"id":"GR","value":30.07},{"id":"GS","value":0},{"id":"GT","value":97.62},{"id":"GU","value":100},{"id":"GW","value":0},{"id":"GY","value":66.67},{"id":"HK","value":72.94},{"id":"HN","value":100},{"id":"HR","value":53.79},{"id":"HT","value":0},{"id":"HU","value":4.35},{"id":"ID","value":94.21},{"id":"IE","value":98},{"id":"IL","value":60.58},{"id":"IM","value":0},{"id":"IN","value":15},{"id":"IO","value":0},{"id":"IQ","value":0},{"id":"IR","value":0},{"id":"IS","value":100},{"id":"IT","value":36.92},{"id":"JE","value":0},{"id":"JM","value":100},{"id":"JO","value":44.44},{"id":"JP","value":9.79},{"id":"KE","value":85.71},{"id":"KG","value":92.31},{"id":"KH","value":96.15},{"id":"KI","value":0},{"id":"KM","value":0},{"id":"KN","value":100},{"id":"KP","value":0},{"id":"KR","value":89.42},{"id":"KW","value":65},{"id":"KY","value":75},{"id":"KZ","value":88.1},{"id":"LA","value":0},{"id":"LB","value":42.86},{"id":"LC","value":100},{"id":"LI","value":0},{"id":"LK","value":26.15},{"id":"LR","value":100},{"id":"LS","value":0},{"id":"LT","value":100},{"id":"LU","value":98},{"id":"LV","value":96.15},{"id":"LY","value":0},{"id":"MA","value":56.76},{"id":"MC","value":25},{"id":"MD","value":83.33},{"id":"ME","value":33.33},{"id":"MF","value":100},{"id":"MG","value":100},{"id":"MH","value":0},{"id":"MK","value":62.5},{"id":"ML","value":100},{"id":"MM","value":8.89},{"id":"MN","value":80},{"id":"MO","value":55.56},{"id":"MP","value":100},{"id":"MQ","value":100},{"id":"MR","value":100},{"id":"MS","value":0},{"id":"MT","value":100},{"id":"MU","value":61.54},{"id":"MV","value":0},{"id":"MW","value":0},{"id":"MX","value":97.61},{"id":"MY","value":75.69},{"id":"MZ","value":50},{"id":"NA","value":100},{"id":"NC","value":100},{"id":"NE","value":100},{"id":"NF","value":0},{"id":"NG","value":86.42},{"id":"NI","value":90.91},{"id":"NL","value":95.32},{"id":"NO","value":97.64},{"id":"NP","value":1.82},{"id":"NR","value":0},{"id":"NU","value":0},{"id":"NZ","value":91.72},{"id":"OM","value":74.07},{"id":"PA","value":96.97},{"id":"PE","value":95.08},{"id":"PF","value":83.33},{"id":"PG","value":50},{"id":"PH","value":51.19},{"id":"PK","value":75.32},{"id":"PL","value":89.5},{"id":"PM","value":100},{"id":"PN","value":0},{"id":"PR","value":95},{"id":"PS","value":0},{"id":"PT","value":72.48},{"id":"PW","value":0},{"id":"PY","value":95.45},{"id":"QA","value":95},{"id":"RE","value":82.35},{"id":"RO","value":18.18},{"id":"RS","value":59.15},{"id":"RU","value":81.93},{"id":"RW","value":50},{"id":"SA","value":73.08},{"id":"SARK","value":0},{"id":"SB","value":0},{"id":"SC","value":50},{"id":"SD","value":0},{"id":"SE","value":89.93},{"id":"SG","value":81.67},{"id":"SH","value":0},{"id":"SI","value":46},{"id":"SJ","value":0},{"id":"SK","value":6.25},{"id":"SL","value":0},{"id":"SM","value":0},{"id":"SN","value":28.57},{"id":"SO","value":0},{"id":"SR","value":50},{"id":"SS","value":0},{"id":"ST","value":0},{"id":"SV","value":100},{"id":"SX","value":100},{"id":"SY","value":100},{"id":"SZ","value":100},{"id":"TC","value":0},{"id":"TD","value":0},{"id":"TF","value":0},{"id":"TG","value":100},{"id":"TH","value":24.82},{"id":"TJ","value":75},{"id":"TK","value":0},{"id":"TL","value":100},{"id":"TM","value":100},{"id":"TO","value":0},{"id":"TR","value":30},{"id":"TT","value":83.33},{"id":"TU","value":58.62},{"id":"TV","value":0},{"id":"TW","value":66.03},{"id":"TZ","value":90.91},{"id":"UA","value":17.82},{"id":"UG","value":50},{"id":"UM","value":0},{"id":"US","value":100},{"id":"UY","value":93.18},{"id":"UZ","value":84.62},{"id":"VA","value":0},{"id":"VC","value":100},{"id":"VE","value":93.75},{"id":"VG","value":100},{"id":"VI","value":100},{"id":"VN","value":92.89},{"id":"VU","value":100},{"id":"WF","value":0},{"id":"WS","value":100},{"id":"XK","value":50},{"id":"YE","value":0},{"id":"YT","value":50},{"id":"ZA","value":88.68},{"id":"ZM","value":85.71},{"id":"ZW","value":100}];

    /* Configure series */
    var polygonTemplate = polygonSeries.mapPolygons.template;
    polygonTemplate.applyOnClones = true;
    polygonTemplate.togglable = true;
    polygonTemplate.tooltipText = "{name}: {value}%";
    polygonTemplate.nonScalingStroke = true;
    polygonTemplate.strokeOpacity = 0.5;
    polygonTemplate.fill = chart.colors.getIndex(0);
    var lastSelected;
    polygonTemplate.events.on("hit", function(ev) {
      if (lastSelected) {
        lastSelected.isActive = false;
      }
      ev.target.series.chart.zoomToMapObject(ev.target);
      if (lastSelected !== ev.target) {
        lastSelected = ev.target;
      }
    })

    chart.responsive.enabled = true;


    /* Create selected and hover states and set alternative fill color */
    var ss = polygonTemplate.states.create("active");
    ss.properties.fill = chart.colors.getIndex(2);

    var hs = polygonTemplate.states.create("hover");
    hs.properties.fill = chart.colors.getIndex(4);

    // Hide Antarctica
    polygonSeries.exclude = ["AQ"];

    // Add heat rule
    polygonSeries.heatRules.push({
      "property": "fill",
      "target": polygonSeries.mapPolygons.template,
      "min": am4core.color("#961a1e"),
      "max": am4core.color("#43ba46")
    });

    var heatLegend = chart.chartContainer.createChild(am4maps.HeatLegend);
    heatLegend.valign = "bottom";
    heatLegend.align = "left";
    heatLegend.width = am4core.percent(100);
    heatLegend.series = polygonSeries;
    heatLegend.orientation = "vertical";
    heatLegend.padding(20, 20, 20, 20);
    heatLegend.valueAxis.renderer.labels.template.fontSize = 10;
    heatLegend.valueAxis.renderer.minGridDistance = 40;

    // Small map
    chart.smallMap = new am4maps.SmallMap();
    chart.smallMap.align = "left";
    chart.smallMap.valign = "top";
    chart.smallMap.series.push(polygonSeries);

    // Zoom control
    chart.zoomControl = new am4maps.ZoomControl();
    chart.zoomControl.valign = "top";

    var homeButton = new am4core.Button();
    homeButton.events.on("hit", function(){
      chart.goHome();
    });

    homeButton.icon = new am4core.Sprite();
    homeButton.padding(7, 5, 7, 5);
    homeButton.width = 30;
    homeButton.icon.path = "M16,8 L14,8 L14,16 L10,16 L10,10 L6,10 L6,16 L2,16 L2,8 L0,8 L8,0 L16,8 Z M16,8";
    homeButton.marginBottom = 10;
    homeButton.parent = chart.zoomControl;
    homeButton.insertBefore(chart.zoomControl.plusButton);

    }); // end am4core.ready()
    </script>

</head>
<body>

    <div id="chartdiv"></div>

</body>

</html>