<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="mobile.css">
    <title>SMPTE Rollout (Countries) Map</title>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" crossorigin="anonymous"></script>
    <script src="features.js" defer></script>


    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/maps.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/geodata/worldLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

    <!-- Chart code -->
    <script>
    am4core.ready(function() {

    // Themes begin
    am4core.useTheme(am4themes_animated);
    // Themes end

    /* Create map instance */
    var chart = am4core.create("chartdiv", am4maps.MapChart);

    /* Set map definition */
    chart.geodata = am4geodata_worldLow;

    /* Set projection */
    chart.projection = new am4maps.projections.Miller();

    /* Create map polygon series */
    var polygonSeries = chart.series.push(new am4maps.MapPolygonSeries());

    /* Make map load polygon (like country names) data from GeoJSON */
    polygonSeries.useGeodata = true;

    polygonSeries.data = [{"id":"AD","value":100},{"id":"AE","value":94.45},{"id":"AF","value":100},{"id":"AG","value":100},{"id":"AI","value":0},{"id":"AL","value":66.67},{"id":"AM","value":100},{"id":"AO","value":63.64},{"id":"AR","value":94.74},{"id":"AS","value":100},{"id":"AT","value":90.5},{"id":"AU","value":89.95},{"id":"AW","value":100},{"id":"AX","value":0},{"id":"AZ","value":75},{"id":"BA","value":87.1},{"id":"BB","value":100},{"id":"BD","value":80},{"id":"BE","value":81.18},{"id":"BF","value":50},{"id":"BG","value":76.84},{"id":"BH","value":57.14},{"id":"BI","value":0},{"id":"BJ","value":100},{"id":"BL","value":0},{"id":"BM","value":90},{"id":"BN","value":70},{"id":"BO","value":96.43},{"id":"BQ","value":100},{"id":"BR","value":46.33},{"id":"BS","value":100},{"id":"BT","value":0},{"id":"BV","value":0},{"id":"BW","value":60},{"id":"BY","value":92.38},{"id":"BZ","value":100},{"id":"CA","value":93.7},{"id":"CD","value":88.89},{"id":"CF","value":0},{"id":"CG","value":100},{"id":"CH","value":76.84},{"id":"CI","value":83.33},{"id":"CK","value":100},{"id":"CL","value":97.27},{"id":"CM","value":100},{"id":"CN","value":0.11},{"id":"CO","value":98.12},{"id":"CR","value":94.87},{"id":"CU","value":50},{"id":"CV","value":100},{"id":"CW","value":100},{"id":"CX","value":100},{"id":"CY","value":75},{"id":"CZ","value":76.72},{"id":"DE","value":85.84},{"id":"DJ","value":100},{"id":"DK","value":92.93},{"id":"DM","value":100},{"id":"DO","value":100},{"id":"DZ","value":85.71},{"id":"EC","value":93.65},{"id":"EE","value":87.76},{"id":"EG","value":46.97},{"id":"EH","value":0},{"id":"ER","value":0},{"id":"ES","value":89.44},{"id":"ET","value":80},{"id":"FI","value":92.42},{"id":"FJ","value":100},{"id":"FK","value":100},{"id":"FM","value":100},{"id":"FO","value":75},{"id":"FR","value":93.58},{"id":"GA","value":100},{"id":"GB","value":91.47},{"id":"GD","value":100},{"id":"GE","value":72.73},{"id":"GF","value":100},{"id":"GG","value":0},{"id":"GH","value":60},{"id":"GI","value":100},{"id":"GL","value":100},{"id":"GM","value":0},{"id":"GN","value":100},{"id":"GP","value":87.5},{"id":"GQ","value":100},{"id":"GR","value":47.78},{"id":"GS","value":0},{"id":"GT","value":100},{"id":"GU","value":100},{"id":"GW","value":0},{"id":"GY","value":71.43},{"id":"HK","value":72.73},{"id":"HN","value":100},{"id":"HR","value":76.98},{"id":"HT","value":0},{"id":"HU","value":68.89},{"id":"ID","value":98.44},{"id":"IE","value":95.33},{"id":"IL","value":55.65},{"id":"IM","value":0},{"id":"IN","value":55.32},{"id":"IO","value":0},{"id":"IQ","value":81.25},{"id":"IR","value":0},{"id":"IS","value":100},{"id":"IT","value":68.16},{"id":"JE","value":0},{"id":"JM","value":100},{"id":"JO","value":80},{"id":"JP","value":27.75},{"id":"KE","value":93.33},{"id":"KG","value":100},{"id":"KH","value":96.43},{"id":"KI","value":0},{"id":"KM","value":0},{"id":"KN","value":100},{"id":"KP","value":0},{"id":"KR","value":92.77},{"id":"KW","value":79.31},{"id":"KY","value":75},{"id":"KZ","value":96.85},{"id":"LA","value":100},{"id":"LB","value":46.43},{"id":"LC","value":100},{"id":"LI","value":0},{"id":"LK","value":24.62},{"id":"LR","value":100},{"id":"LS","value":0},{"id":"LT","value":100},{"id":"LU","value":83.33},{"id":"LV","value":96.3},{"id":"LY","value":0},{"id":"MA","value":77.5},{"id":"MC","value":33.33},{"id":"MD","value":83.33},{"id":"ME","value":70},{"id":"MF","value":100},{"id":"MG","value":100},{"id":"MH","value":0},{"id":"MK","value":88.89},{"id":"ML","value":100},{"id":"MM","value":51.09},{"id":"MN","value":75},{"id":"MO","value":62.5},{"id":"MP","value":100},{"id":"MQ","value":100},{"id":"MR","value":100},{"id":"MS","value":0},{"id":"MT","value":100},{"id":"MU","value":69.23},{"id":"MV","value":50},{"id":"MW","value":0},{"id":"MX","value":97.22},{"id":"MY","value":84.38},{"id":"MZ","value":50},{"id":"NA","value":100},{"id":"NC","value":100},{"id":"NE","value":100},{"id":"NF","value":0},{"id":"NG","value":93.33},{"id":"NI","value":100},{"id":"NL","value":95.1},{"id":"NO","value":96.5},{"id":"NP","value":81.36},{"id":"NR","value":0},{"id":"NU","value":0},{"id":"NZ","value":95},{"id":"OM","value":81.48},{"id":"PA","value":97.06},{"id":"PE","value":96},{"id":"PF","value":83.33},{"id":"PG","value":50},{"id":"PH","value":83.14},{"id":"PK","value":73.17},{"id":"PL","value":89.43},{"id":"PM","value":100},{"id":"PN","value":0},{"id":"PR","value":97.5},{"id":"PS","value":0},{"id":"PT","value":83.26},{"id":"PW","value":0},{"id":"PY","value":95.83},{"id":"QA","value":76.92},{"id":"RE","value":89.47},{"id":"RO","value":59.5},{"id":"RS","value":78.05},{"id":"RU","value":78.8},{"id":"RW","value":100},{"id":"SA","value":90.22},{"id":"SARK","value":0},{"id":"SB","value":0},{"id":"SC","value":50},{"id":"SD","value":50},{"id":"SE","value":93.71},{"id":"SG","value":80.33},{"id":"SH","value":0},{"id":"SI","value":79.59},{"id":"SJ","value":0},{"id":"SK","value":81.42},{"id":"SL","value":0},{"id":"SM","value":0},{"id":"SN","value":55.56},{"id":"SO","value":0},{"id":"SR","value":50},{"id":"SS","value":0},{"id":"ST","value":0},{"id":"SV","value":100},{"id":"SX","value":100},{"id":"SY","value":100},{"id":"SZ","value":100},{"id":"TC","value":0},{"id":"TD","value":0},{"id":"TF","value":0},{"id":"TG","value":100},{"id":"TH","value":44.21},{"id":"TJ","value":75},{"id":"TK","value":0},{"id":"TL","value":100},{"id":"TM","value":100},{"id":"TO","value":0},{"id":"TR","value":71.43},{"id":"TT","value":84.62},{"id":"TU","value":62.07},{"id":"TV","value":0},{"id":"TW","value":70.63},{"id":"TZ","value":90.91},{"id":"UA","value":19.49},{"id":"UG","value":62.5},{"id":"UM","value":0},{"id":"US","value":98.95},{"id":"UY","value":95.56},{"id":"UZ","value":89.29},{"id":"VA","value":0},{"id":"VC","value":100},{"id":"VE","value":95.06},{"id":"VG","value":100},{"id":"VI","value":100},{"id":"VN","value":92.38},{"id":"VU","value":100},{"id":"WF","value":0},{"id":"WS","value":100},{"id":"XK","value":85.71},{"id":"YE","value":0},{"id":"YT","value":100},{"id":"ZA","value":92.71},{"id":"ZM","value":85.71},{"id":"ZW","value":100}];

    /* Configure series */
    var polygonTemplate = polygonSeries.mapPolygons.template;
    polygonTemplate.applyOnClones = true;
    polygonTemplate.togglable = true;
    polygonTemplate.tooltipText = "{name}: {value}%";
    polygonTemplate.nonScalingStroke = true;
    polygonTemplate.strokeOpacity = 0.5;
    polygonTemplate.fill = chart.colors.getIndex(0);
    var lastSelected;
    polygonTemplate.events.on("hit", function(ev) {
      if (lastSelected) {
        lastSelected.isActive = false;
      }
      ev.target.series.chart.zoomToMapObject(ev.target);
      if (lastSelected !== ev.target) {
        lastSelected = ev.target;
      }
    })

    chart.responsive.enabled = true;


    /* Create selected and hover states and set alternative fill color */
    var ss = polygonTemplate.states.create("active");
    ss.properties.fill = chart.colors.getIndex(2);

    var hs = polygonTemplate.states.create("hover");
    hs.properties.fill = chart.colors.getIndex(4);

    // Hide Antarctica
    polygonSeries.exclude = ["AQ"];

    // Add heat rule
    polygonSeries.heatRules.push({
      "property": "fill",
      "target": polygonSeries.mapPolygons.template,
      "min": am4core.color("#961a1e"),
      "max": am4core.color("#43ba46")
    });

    var heatLegend = chart.chartContainer.createChild(am4maps.HeatLegend);
    heatLegend.valign = "bottom";
    heatLegend.align = "left";
    heatLegend.width = am4core.percent(100);
    heatLegend.series = polygonSeries;
    heatLegend.orientation = "vertical";
    heatLegend.padding(20, 20, 20, 20);
    heatLegend.valueAxis.renderer.labels.template.fontSize = 10;
    heatLegend.valueAxis.renderer.minGridDistance = 40;

    // Small map
    chart.smallMap = new am4maps.SmallMap();
    chart.smallMap.align = "left";
    chart.smallMap.valign = "top";
    chart.smallMap.series.push(polygonSeries);

    // Zoom control
    chart.zoomControl = new am4maps.ZoomControl();
    chart.zoomControl.valign = "top";

    var homeButton = new am4core.Button();
    homeButton.events.on("hit", function(){
      chart.goHome();
    });

    homeButton.icon = new am4core.Sprite();
    homeButton.padding(7, 5, 7, 5);
    homeButton.width = 30;
    homeButton.icon.path = "M16,8 L14,8 L14,16 L10,16 L10,10 L6,10 L6,16 L2,16 L2,8 L0,8 L8,0 L16,8 Z M16,8";
    homeButton.marginBottom = 10;
    homeButton.parent = chart.zoomControl;
    homeButton.insertBefore(chart.zoomControl.plusButton);

    }); // end am4core.ready()
    </script>

</head>
<body>

    <div id="chartdiv"></div>

</body>

</html>